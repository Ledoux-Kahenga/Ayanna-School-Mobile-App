BEGIN TRANSACTION;
CREATE TABLE IF NOT EXISTS classes_comptables (
	code VARCHAR(10), 
	nom VARCHAR(100) NOT NULL, 
	libelle VARCHAR(255) NOT NULL, 
	type VARCHAR(20) NOT NULL, 
	entreprise_id INTEGER NOT NULL, 
	actif BOOLEAN, 
	document VARCHAR(255), 
	id INTEGER NOT NULL, 
	date_creation DATETIME NOT NULL, 
	date_modification DATETIME NOT NULL, 
	PRIMARY KEY (id)
);
CREATE TABLE IF NOT EXISTS comptes_comptables (
	numero VARCHAR(20) NOT NULL, 
	nom VARCHAR(255) NOT NULL, 
	libelle VARCHAR(255) NOT NULL, 
	actif BOOLEAN, 
	classe_comptable_id INTEGER NOT NULL, 
	id INTEGER NOT NULL, 
	date_creation DATETIME NOT NULL, 
	date_modification DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(classe_comptable_id) REFERENCES classes_comptables (id)
);
CREATE TABLE IF NOT EXISTS comptes_config (
	entreprise_id INTEGER NOT NULL, 
	compte_caisse_id INTEGER NOT NULL, 
	compte_frais_id INTEGER NOT NULL, 
	compte_client_id INTEGER NOT NULL, 
	id INTEGER NOT NULL, 
	date_creation DATETIME NOT NULL, 
	date_modification DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(compte_caisse_id) REFERENCES comptes_comptables (id), 
	FOREIGN KEY(compte_frais_id) REFERENCES comptes_comptables (id), 
	FOREIGN KEY(compte_client_id) REFERENCES comptes_comptables (id)
);
CREATE TABLE IF NOT EXISTS creances (
	id INTEGER NOT NULL, 
	eleve_id INTEGER NOT NULL, 
	frais_scolaire_id INTEGER NOT NULL, 
	montant DECIMAL(15, 2) NOT NULL, 
	date_echeance DATE NOT NULL, 
	active BOOLEAN, 
	PRIMARY KEY (id), 
	FOREIGN KEY(eleve_id) REFERENCES eleves (id), 
	FOREIGN KEY(frais_scolaire_id) REFERENCES frais_scolaires (id)
);
CREATE TABLE IF NOT EXISTS depenses (
	libelle VARCHAR(255) NOT NULL, 
	montant NUMERIC(15, 2) NOT NULL, 
	date_depense DATETIME NOT NULL, 
	entreprise_id INTEGER NOT NULL, 
	piece TEXT, 
	observation TEXT, 
	journal_id INTEGER, 
	user_id INTEGER, 
	id INTEGER NOT NULL, 
	date_creation DATETIME NOT NULL, 
	date_modification DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(entreprise_id) REFERENCES entreprises (id), 
	FOREIGN KEY(journal_id) REFERENCES journaux_comptables (id), 
	FOREIGN KEY(user_id) REFERENCES utilisateurs (id)
);
CREATE TABLE IF NOT EXISTS ecritures_comptables (
	journal_id INTEGER NOT NULL, 
	compte_comptable_id INTEGER NOT NULL, 
	piece_id INTEGER, 
	debit NUMERIC(15, 2), 
	credit NUMERIC(15, 2), 
	ordre INTEGER NOT NULL, 
	created_at DATETIME NOT NULL, 
	id INTEGER NOT NULL, 
	date_creation DATETIME NOT NULL, 
	date_modification DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(journal_id) REFERENCES journaux_comptables (id), 
	FOREIGN KEY(compte_comptable_id) REFERENCES comptes_comptables (id), 
	FOREIGN KEY(piece_id) REFERENCES pieces_comptables (id)
);
CREATE TABLE IF NOT EXISTS exercices_comptables (
	libelle VARCHAR(100) NOT NULL, 
	date_debut DATETIME NOT NULL, 
	date_fin DATETIME NOT NULL, 
	est_cloture BOOLEAN, 
	date_cloture DATETIME, 
	entreprise_id INTEGER NOT NULL, 
	id INTEGER NOT NULL, 
	date_creation DATETIME NOT NULL, 
	date_modification DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(entreprise_id) REFERENCES entreprises (id)
);
CREATE TABLE IF NOT EXISTS journaux_comptables (
	date_operation DATETIME NOT NULL, 
	libelle VARCHAR(255) NOT NULL, 
	montant NUMERIC(15, 2) NOT NULL, 
	type_operation VARCHAR(20) NOT NULL, 
	paiement_frais_id INTEGER, 
	entreprise_id INTEGER NOT NULL, 
	created_at DATETIME NOT NULL, 
	id INTEGER NOT NULL, 
	date_creation DATETIME NOT NULL, 
	date_modification DATETIME NOT NULL, 
	PRIMARY KEY (id), 
	FOREIGN KEY(paiement_frais_id) REFERENCES paiement_frais (id), 
	FOREIGN KEY(entreprise_id) REFERENCES entreprises (id)
);
CREATE TABLE IF NOT EXISTS paiement_frais (
	id INTEGER NOT NULL, 
	eleve_id INTEGER NOT NULL, 
	frais_scolaire_id INTEGER NOT NULL, 
	montant_paye DECIMAL(15, 2) NOT NULL, 
	date_paiement DATE NOT NULL, 
	user_id INTEGER, 
	reste_a_payer DECIMAL(15, 2), 
	statut VARCHAR(20), 
	PRIMARY KEY (id), 
	FOREIGN KEY(eleve_id) REFERENCES eleves (id), 
	FOREIGN KEY(frais_scolaire_id) REFERENCES frais_scolaires (id), 
	FOREIGN KEY(user_id) REFERENCES utilisateurs (id)
);
INSERT INTO "classes_comptables" ("code","nom","libelle","type","entreprise_id","actif","document","id","date_creation","date_modification") VALUES ('1','Actif','Comptes de ressources durables','actif',2,1,'bilan',1,'2025-08-09 06:49:16','2025-08-09 06:49:16'),
 ('2','Passif','Comptes emplois durables','passif',2,1,'bilan',2,'2025-08-09 06:49:16','2025-08-09 06:49:16'),
 ('3','Stocks','Comptes de stocks et en-cours','actif',2,1,'bilan',3,'2025-08-09 06:49:16','2025-08-09 06:49:16'),
 ('4','Tierse','Comptes de tiers','mixte',2,1,'bilan',4,'2025-08-09 06:49:16','2025-08-09 06:49:16'),
 ('5','Financiers','Comptes financiers','actif',2,1,'bilan',5,'2025-08-09 06:49:16','2025-08-09 06:49:16'),
 ('6','Charges','Comptes de charges','charge',2,1,'resultat',6,'2025-08-09 06:49:16','2025-08-09 06:49:16'),
 ('7','Produits','Comptes de produits','produit',2,1,'resultat',7,'2025-08-09 06:49:16','2025-08-09 06:49:16');
INSERT INTO "comptes_comptables" ("numero","nom","libelle","actif","classe_comptable_id","id","date_creation","date_modification") VALUES ('5000','Caisse Ecole','Comptes liés à toutes les operations courantes',1,5,1,'2025-08-09 06:50:32','2025-08-09 06:50:32'),
 ('6100','Salaire Personnel','Compte lié aux salaires des personnels',1,6,2,'2025-08-09 06:51:42','2025-08-09 06:51:42'),
 ('6101','Transport Personnel','Comptes liés aux transports des personnels',1,6,3,'2025-08-09 06:52:40','2025-08-09 06:52:40'),
 ('6200','Achats Materiaux','Compte lié aux achats des materiaux scolaires',1,6,4,'2025-08-09 06:53:36','2025-08-09 06:54:19'),
 ('4000','Clients','Clients ecoles',1,4,5,'2025-08-09 06:55:14','2025-08-09 06:55:14'),
 ('4100','Fournisseurs','Comptes des fournisseurs',1,4,6,'2025-08-09 06:56:15','2025-08-09 06:56:15'),
 ('7000','Frais scolaire','compte lié au paiement des frais scolaires',1,7,7,'2025-08-09 06:57:36','2025-08-09 06:57:36'),
 ('5001','CAISSE ECOLE 2024-2025','Caisse ecole',1,5,8,'2025-08-18 14:54:59','2025-08-18 14:54:59'),
 ('7001','FRAIS ECOLE 2024-2025','Frais scolaire',1,7,9,'2025-08-18 14:56:08','2025-08-18 14:56:08'),
 ('4001','CLIENTS 2024-2025','Clients ecoles',1,4,10,'2025-08-18 14:56:29','2025-08-18 14:56:29'),
 ('6400','Imprevues','Comptes imprevue',1,6,11,'2025-08-22 08:09:59','2025-08-22 08:09:59'),
 ('6500','Electrecité','Compte electricité',1,6,12,'2025-08-22 08:10:25','2025-08-22 08:10:25'),
 ('5500','Banque','Compte banque',1,5,13,'2025-08-22 08:23:13','2025-08-22 08:23:13'),
 ('5600','Promoteur','Compte promo',1,5,14,'2025-08-22 08:23:47','2025-08-22 08:23:47');
INSERT INTO "comptes_config" ("entreprise_id","compte_caisse_id","compte_frais_id","compte_client_id","id","date_creation","date_modification") VALUES (2,8,9,10,1,'2025-08-09 06:57:48','2025-08-18 14:56:40');
INSERT INTO "depenses" ("libelle","montant","date_depense","entreprise_id","piece","observation","journal_id","user_id","id","date_creation","date_modification") VALUES ('Transport du 21 aout',5,'2025-08-21 21:53:04.309433',2,'','',3,2,1,'2025-08-21 19:53:04','2025-08-21 19:53:04'),
 ('Achat ciments',20,'2025-08-22 10:11:22.598087',2,'','',8,4,2,'2025-08-22 08:11:22','2025-08-22 08:11:22'),
 ('fact elec',25,'2025-08-23 19:09:42.002991',2,'','',14,5,3,'2025-08-23 17:09:42','2025-08-23 17:09:42');
INSERT INTO "ecritures_comptables" ("journal_id","compte_comptable_id","piece_id","debit","credit","ordre","created_at","id","date_creation","date_modification") VALUES (1,8,NULL,15,0,1,'2025-08-19 13:02:01.729622',1,'2025-08-19 13:02:01','2025-08-19 13:02:01'),
 (1,9,NULL,0,15,2,'2025-08-19 13:02:01.729622',2,'2025-08-19 13:02:01','2025-08-19 13:02:01'),
 (2,8,NULL,15,0,1,'2025-08-21 19:52:24.391611',3,'2025-08-21 19:52:24','2025-08-21 19:52:24'),
 (2,9,NULL,0,15,2,'2025-08-21 19:52:24.391611',4,'2025-08-21 19:52:24','2025-08-21 19:52:24'),
 (3,3,NULL,5,0,1,'2025-08-21 19:53:04.309433',5,'2025-08-21 19:53:04','2025-08-21 19:53:04'),
 (3,8,NULL,0,5,2,'2025-08-21 19:53:04.309433',6,'2025-08-21 19:53:04','2025-08-21 19:53:04'),
 (4,8,NULL,10,0,1,'2025-08-22 05:59:48.606943',7,'2025-08-22 05:59:48','2025-08-22 05:59:48'),
 (4,9,NULL,0,10,2,'2025-08-22 05:59:48.606943',8,'2025-08-22 05:59:48','2025-08-22 05:59:48'),
 (5,8,NULL,15,0,1,'2025-08-22 06:01:30.089599',9,'2025-08-22 06:01:30','2025-08-22 06:01:30'),
 (5,9,NULL,0,15,2,'2025-08-22 06:01:30.089599',10,'2025-08-22 06:01:30','2025-08-22 06:01:30'),
 (6,8,NULL,15,0,1,'2025-08-22 08:04:19.098118',11,'2025-08-22 08:04:19','2025-08-22 08:04:19'),
 (6,9,NULL,0,15,2,'2025-08-22 08:04:19.098118',12,'2025-08-22 08:04:19','2025-08-22 08:04:19'),
 (7,8,NULL,10,0,1,'2025-08-22 08:05:20.239164',13,'2025-08-22 08:05:20','2025-08-22 08:05:20'),
 (7,9,NULL,0,10,2,'2025-08-22 08:05:20.239164',14,'2025-08-22 08:05:20','2025-08-22 08:05:20'),
 (8,4,NULL,20,0,1,'2025-08-22 08:11:22.637592',15,'2025-08-22 08:11:22','2025-08-22 08:11:22'),
 (8,8,NULL,0,20,2,'2025-08-22 08:11:22.637592',16,'2025-08-22 08:11:22','2025-08-22 08:11:22'),
 (9,13,NULL,50,0,1,'2025-08-22 08:25:05.101464',17,'2025-08-22 08:25:05','2025-08-22 08:25:05'),
 (9,8,NULL,0,50,2,'2025-08-22 08:25:05.101464',18,'2025-08-22 08:25:05','2025-08-22 08:25:05'),
 (10,8,NULL,15,0,1,'2025-08-22 08:46:15.718114',19,'2025-08-22 08:46:15','2025-08-22 08:46:15'),
 (10,9,NULL,0,15,2,'2025-08-22 08:46:15.718114',20,'2025-08-22 08:46:15','2025-08-22 08:46:15'),
 (11,5,NULL,15,0,1,'2025-08-22 09:36:33.285016',21,'2025-08-22 09:36:33','2025-08-22 09:36:33'),
 (11,8,NULL,0,15,2,'2025-08-22 09:36:33.285016',22,'2025-08-22 09:36:33','2025-08-22 09:36:33'),
 (12,8,NULL,20,0,1,'2025-08-23 17:08:20.831236',23,'2025-08-23 17:08:20','2025-08-23 17:08:20'),
 (12,9,NULL,0,20,2,'2025-08-23 17:08:20.831236',24,'2025-08-23 17:08:20','2025-08-23 17:08:20'),
 (13,8,NULL,20,0,1,'2025-08-23 17:08:27.246609',25,'2025-08-23 17:08:27','2025-08-23 17:08:27'),
 (13,9,NULL,0,20,2,'2025-08-23 17:08:27.246609',26,'2025-08-23 17:08:27','2025-08-23 17:08:27'),
 (14,12,NULL,25,0,1,'2025-08-23 17:09:42.018582',27,'2025-08-23 17:09:42','2025-08-23 17:09:42'),
 (14,8,NULL,0,25,2,'2025-08-23 17:09:42.018582',28,'2025-08-23 17:09:42','2025-08-23 17:09:42');
INSERT INTO "journaux_comptables" ("date_operation","libelle","montant","type_operation","paiement_frais_id","entreprise_id","created_at","id","date_creation","date_modification") VALUES ('2025-08-19 15:02:01.684072','Paiement : Inscription Mutombo Kayeye Kayeye',15,'entrée',1,2,'2025-08-19 13:02:01.729622',1,'2025-08-19 13:02:01','2025-08-19 13:02:01'),
 ('2025-08-21 21:52:24.375987','Paiement : Inscription Walongo Victorine Victorine',15,'entrée',2,2,'2025-08-21 19:52:24.391611',2,'2025-08-21 19:52:24','2025-08-21 19:52:24'),
 ('2025-08-21 21:53:04.309433','Transport du 21 aout',5,'sortie',NULL,2,'2025-08-21 19:53:04.309433',3,'2025-08-21 19:53:04','2025-08-21 19:53:04'),
 ('2025-08-22 07:59:48.549930','Paiement : Minerval septembre Secondaire Walongo Victorine Victorine',10,'entrée',3,2,'2025-08-22 05:59:48.591232',4,'2025-08-22 05:59:48','2025-08-22 05:59:48'),
 ('2025-08-22 08:01:30.032598','Paiement : Inscription Ilunga Kayeye Kayeye',15,'entrée',4,2,'2025-08-22 06:01:30.073864',5,'2025-08-22 06:01:30','2025-08-22 06:01:30'),
 ('2025-08-22 10:04:19.082408','Paiement : Inscription Kasongo Kasongo Helene',15,'entrée',5,2,'2025-08-22 08:04:19.098118',6,'2025-08-22 08:04:19','2025-08-22 08:04:19'),
 ('2025-08-22 10:05:20.192209','Paiement : Minerval septembre Humanité Kasongo Kasongo Helene',10,'entrée',6,2,'2025-08-22 08:05:20.239164',7,'2025-08-22 08:05:20','2025-08-22 08:05:20'),
 ('2025-08-22 10:11:22.598087','Achat ciments',20,'sortie',NULL,2,'2025-08-22 08:11:22.598087',8,'2025-08-22 08:11:22','2025-08-22 08:11:22'),
 ('2025-08-22 10:25:05.061692','transfert banque',50,'transfert',NULL,2,'2025-08-22 08:25:05.061692',9,'2025-08-22 08:25:05','2025-08-22 08:25:05'),
 ('2025-08-22 10:46:15.686783','Paiement : Inscription Mathick Nawej Nawej',15,'entrée',7,2,'2025-08-22 08:46:15.702403',10,'2025-08-22 08:46:15','2025-08-22 08:46:15'),
 ('2025-08-22 11:36:33.242865','Paiement inscription annulée : mathick nawej nawej',15,'transfert',NULL,2,'2025-08-22 09:36:33.242865',11,'2025-08-22 09:36:33','2025-08-22 09:36:33'),
 ('2025-08-23 19:08:20.778825','Paiement : Minerval novembre Secondaire Kabwe Lubinda Lubinda',20,'entrée',8,2,'2025-08-23 17:08:20.823085',12,'2025-08-23 17:08:20','2025-08-23 17:08:20'),
 ('2025-08-23 19:08:27.194152','Paiement : Minerval Decembre Secondaire Kabwe Lubinda Lubinda',20,'entrée',9,2,'2025-08-23 17:08:27.239365',13,'2025-08-23 17:08:27','2025-08-23 17:08:27'),
 ('2025-08-23 19:09:42.002991','fact elec',25,'sortie',NULL,2,'2025-08-23 17:09:42.002991',14,'2025-08-23 17:09:42','2025-08-23 17:09:42');
INSERT INTO "paiement_frais" ("id","eleve_id","frais_scolaire_id","montant_paye","date_paiement","user_id","reste_a_payer","statut") VALUES (1,4,2,15,'2025-08-19',NULL,0,'partiel'),
 (2,9,2,15,'2025-08-21',NULL,0,'partiel'),
 (3,9,3,10,'2025-08-22',NULL,10,'partiel'),
 (4,5,2,15,'2025-08-22',NULL,0,'partiel'),
 (5,23,2,15,'2025-08-22',NULL,0,'partiel'),
 (6,23,4,10,'2025-08-22',NULL,15,'partiel'),
 (7,7,2,15,'2025-08-22',5,0,'partiel'),
 (8,8,7,20,'2025-08-23',5,0,'partiel'),
 (9,8,9,20,'2025-08-23',5,0,'partiel');
COMMIT;
